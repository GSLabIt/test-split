<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <record model="ir.ui.view" id="custom_cx_404_pos_view">
        <field name="name">pos.config.form.extended.view</field>
        <field name="model">pos.config</field>
        <field name="inherit_id" ref="point_of_sale.pos_config_view_form" />
        <field name="arch" type="xml">
            <xpath expr="//div[5]" position="after">
                <h2 name="order">Manage Sales Orders in POS</h2>
                <div class="row mt16 o_settings_container">
                    <div id="check" class="col-xs-12 col-md-6 o_setting_box">
                        <div class="o_setting_left_pane">
                            <field name="check" />
                        </div>
                        <div class="o_setting_right_pane">
                            <label for="check" string='Import Sale Order' />
                        </div>
                    </div>
                    <div
                        class="col-xs-12 col-md-6 o_setting_box"
                        title="Operation types show up in the Inventory dashboard."
                    >
                        <div class="o_setting_right_pane">
                            <label for="virtual_product_id" string="Virtual Product" />
                            <div class="text-muted">
                                Product (must be type 'Service'!) used for payments for existing Sales Orders in POS
                            </div>
                            <div class="content-group mt16">
                                <field name="virtual_product_id" required="1" />
                            </div>
                        </div>
                    </div>
                </div>
            </xpath>
        </field>
    </record>
    <!--#############
        # Pos Order #
        #############-->
    <!--## Form ##-->
    <record id="cx_pos_order_form" model="ir.ui.view">
        <field name="name">POS Order</field>
        <field name="model">pos.order</field>
        <field name="inherit_id" ref="point_of_sale.view_pos_pos_form" />
        <field name="arch" type="xml">
            <xpath
                expr="//field[@name='lines']//tree//field[@name='price_subtotal_incl']"
                position="after"
            >
                <field name="sale_order_id" />
            </xpath>
            <xpath
                expr="//field[@name='lines']//form//field[@name='notice']"
                position="after"
            >
                <field name="sale_order_id" />
            </xpath>
        </field>
    </record>
    <!--###############
        # Sales Order #
        ###############-->
    <!--## Form ##-->
    <record id="cx_sale_order_form" model="ir.ui.view">
        <field name="name">Sales Order</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form" />
        <field name="arch" type="xml">
            <button name="action_view_invoice" position="after">
                <button
                    name="act_so_2_pos"
                    type="object"
                    class="oe_stat_button"
                    icon="fa-pencil-square-o"
                    attrs="{'invisible': [('pos_order_count', '=', 0)]}"
                >
                    <field
                        name="pos_order_count"
                        widget="statinfo"
                        string="POS Orders"
                    />
                </button>
            </button>
            <field name="amount_total" position="after">
                <field
                    name="amount_paid"
                    widget="monetary"
                    options="{'currency_field': 'currency_id'}"
                />
                <field
                    name="amount_paid_pos"
                    widget="monetary"
                    options="{'currency_field': 'currency_id'}"
                />
                <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                    <label for="amount_remaining" />
                </div>
                <field
                    name="amount_remaining"
                    nolabel="1"
                    class="oe_subtotal_footer_separator"
                    widget="monetary"
                    options="{'currency_field': 'currency_id'}"
                />
            </field>
        </field>
    </record>
    <!--## Tree ##-->
    <record id="cx_sale_order_quotation_tree" model="ir.ui.view">
        <field name="name">Sales Order</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_quotation_tree" />
        <field name="arch" type="xml">
            <field name="amount_total" position="after">
                <field
                    name="amount_paid_pos"
                    widget="monetary"
                    options="{'currency_field': 'currency_id'}"
                />
            </field>
        </field>
    </record>
    <record id="cx_sale_order_so_tree" model="ir.ui.view">
        <field name="name">Sales Order</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_tree" />
        <field name="arch" type="xml">
            <field name="amount_total" position="after">
                <field
                    name="amount_paid_pos"
                    widget="monetary"
                    options="{'currency_field': 'currency_id'}"
                />
            </field>
        </field>
    </record>
</odoo>
